(this.webpackJsonpstartnavi=this.webpackJsonpstartnavi||[]).push([[0],{23:function(e,a,n){e.exports=n(38)},32:function(e,a,n){},34:function(e,a,n){},35:function(e,a,n){},36:function(e,a,n){},37:function(e,a,n){},38:function(e,a,n){"use strict";n.r(a);var r=n(0),t=n.n(r),s=n(7),o=n.n(s),i=n(9),c=n(5),u=n(1),l={loading:!1,winners:[],userName:"",userMode:"",delay:"",userNameError:"",userModeError:"",gameWinner:"",endGame:!1,startGame:!1,arrayGameField:[],gameSetting:[],gameMode:[],error:null};var d,m=n(13),p=n(18);Object(p.createLogger)();d=Object(c.a)(m.a);var E=Object(c.c)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"FETCH_LOADER":return Object(u.a)({},e,{loading:!0});case"FETCH_SETTING_SUCCESS":return Object(u.a)({},e,{gameSetting:a.payload,gameMode:a.payload});case"FETCH_WINNERS_SUCCESS":return Object(u.a)({},e,{loading:!1,winners:a.payload});case"SET_USER_NAME":return Object(u.a)({},e,{userName:a.payload,userNameError:""});case"SET_USER_NAME_ERROR":return Object(u.a)({},e,{userNameError:a.payload});case"SET_USER_MODE_ERROR":return Object(u.a)({},e,{userModeError:a.payload});case"SET_USER_MODE":var n=e.gameSetting.findIndex((function(e){return e.field===+a.payload})),r=e.gameSetting[n].delay;return Object(u.a)({},e,{userMode:a.payload,delay:r,userModeError:""});case"START_USER_GAME":return Object(u.a)({},e,{endGame:!1,startGame:!0,gameWinner:"",arrayGameField:e.arrayGameField.map((function(e){return 0===e.status?e:Object(u.a)({},e,{status:0})}))});case"END_USER_GAME":return Object(u.a)({},e,{startGame:!1,endGame:!0,gameWinner:a.payload});case"ADD_ELEMENT_FIELD":return Object(u.a)({},e,{arrayGameField:a.payload});case"CHANGE_ELEMENT_STATUS":return Object(u.a)({},e,{arrayGameField:e.arrayGameField.map((function(e){return e.id===a.id?Object(u.a)({},e,{status:a.status}):e}))});case"FETCH_ERROR":return Object(u.a)({},e,{loading:!1,error:a.payload});default:return e}}),d),f=n(8),g=n(19),h=n(21),v=n(20),y=n(22),N=(n(32),n(3)),S=n.n(N),_=n(6),M=n(14),b=n.n(M),G=new function e(){var a=this;Object(f.a)(this,e),this._apiBase="https://starnavi-frontend-test-task.herokuapp.com",this.getResource=function(){var e=Object(_.a)(S.a.mark((function e(n){var r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(a._apiBase).concat(n));case 2:if((r=e.sent).ok){e.next=5;break}throw new Error("Could not fetch ".concat(a._apiBase).concat(n,", received ").concat(r.status));case 5:return e.next=7,r.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),this.setResources=function(){var e=Object(_.a)(S.a.mark((function e(n,r){var t;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(a._apiBase).concat(n),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});case 2:if((t=e.sent).ok){e.next=5;break}throw new Error("Could not fetch ".concat(a._apiBase).concat(n,", received ").concat(t.status));case 5:return e.next=7,t.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(a,n){return e.apply(this,arguments)}}(),this.getGameSetting=Object(_.a)(S.a.mark((function e(){var n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.getResource("/game-settings");case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)}))),this.setGameWinners=function(){var e=Object(_.a)(S.a.mark((function e(n){var r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.setResources("/winners",n);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),this.getGameWinners=Object(_.a)(S.a.mark((function e(){var n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.getResource("/winners");case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))},w=function(){return{type:"FETCH_LOADER"}},O=function(e){return{type:"FETCH_WINNERS_SUCCESS",payload:e}},R=function(e){return{type:"SET_USER_MODE",payload:e}},C=function(e){for(var a=[],n=0;n<Math.pow(e,2);n++)a.push({id:b()(4)+n,status:0});return{type:"ADD_ELEMENT_FIELD",payload:a}};function T(e){return{type:"FETCH_ERROR",error:e}}n(34);var j=function(e){var a=e.gameMode,n=e.userMode,r=e.userName,s=e.userModeError,o=e.userNameError,i=e.handleSubmit,c=e.startGame,u=e.endGame,l=e.handleChangeMode,d=e.handleChangeName;return t.a.createElement("div",null,t.a.createElement("form",{onSubmit:i},t.a.createElement("div",{className:"form-mode"},t.a.createElement("div",{className:"form-mode__group"},t.a.createElement("select",{onChange:l,value:n,disabled:c?"disabled":""},t.a.createElement("option",{value:""},"Pick game mode"),a.map((function(e){return t.a.createElement("option",{value:e.field,key:e.id},e.mode)}))),s?t.a.createElement("span",{className:"form-error"},s):""),t.a.createElement("div",{className:"form-mode__group"},t.a.createElement("input",{type:"text",placeholder:"Enter your name",value:r,disabled:c?"disabled":"",onChange:d}),o?t.a.createElement("span",{className:"form-error"},o):""),t.a.createElement("div",{className:"form-mode__group"},t.a.createElement("button",{disabled:c?"disabled":""},u?"Play again":"Play")))))},U=(n(35),n(2)),k=n.n(U),W=(n(36),function(){return t.a.createElement("div",{className:"loader"},t.a.createElement("div",{className:"inner one"}),t.a.createElement("div",{className:"inner two"}),t.a.createElement("div",{className:"inner three"}))}),F=(n(37),function(e){var a=e.winners,n=e.loading;return t.a.createElement("div",{className:"winner-wrapper"},t.a.createElement("h2",null,"Leader Board"),n?t.a.createElement(W,null):a.map((function(e){return t.a.createElement("div",{key:e.id,className:"winners"},t.a.createElement("div",{className:"winners-item"},e.winner),t.a.createElement("div",{className:"winners-item"},e.date))})))}),x=function(e){var a=e.arrayGameField,n=e.userMode,r=e.gameWinner,s=e.handleClick;return t.a.createElement("div",{className:"game-wrapper"},t.a.createElement("h4",{className:"game-winner"},r?"".concat(r," won!"):""),t.a.createElement("div",{className:"game-area",style:{maxWidth:"".concat(50*n,"px")}},a.map((function(e){return t.a.createElement("div",{style:{background:2===e.status?"#00E871":1===e.status?"#42D8E8":3===e.status?"#E85A5F":"#fff"},className:"game-area-item",key:e.id,onClick:function(){return s(e.id,e.status)}})}))))};F.propTypes={arrayGameField:k.a.array,handleClick:k.a.func,gameWinner:k.a.string};var D=function(e){function a(){var e,n;Object(f.a)(this,a);for(var r=arguments.length,t=new Array(r),s=0;s<r;s++)t[s]=arguments[s];return(n=Object(h.a)(this,(e=Object(v.a)(a)).call.apply(e,[this].concat(t)))).handleChangeName=function(e){var a=e.target.value;n.props.setUserName(a)},n.handleChangeMode=function(e){var a=e.target.value;n.props.setUserMode(a)},n.handleClick=function(e,a){1===a&&n.props.changeElementStatus(e,2)},n.handleSubmit=function(e){e.preventDefault();var a=n.props,r=a.userName,t=a.userMode;return""===r?(n.props.setUserNameError("Invalid user name"),!1):""===t?(n.props.setUserModeError("Invalid user mode"),!1):(n.props.startUserGame(),void n.interval())},n.sendUserWinners=function(e){n.props.endUserGame(e),n.props.setWinners(n.sendData())},n.sendData=function(){var e=n.props.gameWinner,a=new Date,r=a.toLocaleString("default",{month:"long"});return{winner:e,date:"".concat(a.toTimeString().slice(0,5)," ").concat(a.getDate()," ").concat(r,"  ").concat(a.getFullYear())}},n.interval=function(){var e=setInterval((function(){var a=n.props.arrayGameField,r=a.filter((function(e){return 0===e.status})),t=a.filter((function(e){return 1===e.status})),s=a.filter((function(e){return 2===e.status})),o=a.filter((function(e){return 3===e.status}));if(s.length>a.length/2)return clearInterval(e),n.sendUserWinners(n.props.userName),!1;if(o.length>a.length/2)return clearInterval(e),n.sendUserWinners("Computer"),!1;if(t.length){var i=t.findIndex((function(e){return 1===e.status})),c=t[i].id,u=a.findIndex((function(e){return e.id===c})),l=a[u].id;n.props.changeElementStatus(l,3)}else if(r.length){var d=r[Math.floor(Math.random()*r.length)].id,m=a.findIndex((function(e){return e.id===d})),p=a[m].id;n.props.changeElementStatus(p,1)}else clearInterval(e)}),n.props.delay)},n}return Object(y.a)(a,e),Object(g.a)(a,[{key:"componentDidMount",value:function(){this.props.getGameMode(),this.props.getWinners()}},{key:"render",value:function(){var e=this.props,a=e.loading,n=e.gameMode,r=e.userMode,s=e.userName,o=e.userNameError,i=e.userModeError,c=e.arrayGameField,u=e.getWinners,l=e.startGame,d=e.winners,m=e.gameWinner,p=e.endGame;return t.a.createElement("div",{className:"container"},t.a.createElement("h1",null,"Game In Dots"),t.a.createElement("div",{className:"wrapper-area"},t.a.createElement("div",null,t.a.createElement(j,{gameMode:n,userName:s,userMode:r,userNameError:o,userModeError:i,handleSubmit:this.handleSubmit,startGame:l,endGame:p,handleChangeName:this.handleChangeName,handleChangeMode:this.handleChangeMode}),t.a.createElement(x,{arrayGameField:c,handleClick:this.handleClick,userMode:r,gameWinner:m})),t.a.createElement(F,{getWinners:u,winners:d,loading:a})))}}]),a}(t.a.Component);var A={getGameMode:function(){return function(e){G.getGameSetting().then((function(a){var n=Object.values(function(e){var a=0;for(var n in e)a++,e[n].mode=n,e[n].id=b()(4)+a;return e}(a));e({type:"FETCH_SETTING_SUCCESS",payload:n})}),(function(a){e(T(a))}))}},getWinners:function(){return function(e){e(w()),G.getGameWinners().then((function(a){e(O(a))}),(function(a){e(T(a))}))}},setUserName:function(e){return{type:"SET_USER_NAME",payload:e}},setUserMode:function(e){return function(a){a(R(e)),a(C(e))}},setUserModeError:function(e){return{type:"SET_USER_MODE_ERROR",payload:e}},setUserNameError:function(e){return{type:"SET_USER_NAME_ERROR",payload:e}},startUserGame:function(){return{type:"START_USER_GAME"}},changeElementStatus:function(e,a){return{type:"CHANGE_ELEMENT_STATUS",id:e,status:a}},endUserGame:function(e){return{type:"END_USER_GAME",payload:e}},setWinners:function(e){return function(a){a(w()),G.setGameWinners(e).then((function(e){a(O(e))}),(function(e){a(T(e))}))}}},I=Object(i.b)((function(e){var a=e.loading,n=e.gameSetting,r=e.gameMode,t=e.userSetting,s=e.userName,o=e.userMode,i=e.userModeError,c=e.userNameError,u=e.arrayGameField,l=e.startGame,d=e.winners,m=e.gameWinner,p=e.endGame;return{loading:a,gameSetting:n,delay:e.delay,gameMode:r,userSetting:t,userName:s,userMode:o,userNameError:c,userModeError:i,arrayGameField:u,startGame:l,winners:d,gameWinner:m,endGame:p}}),A)(D);var L=function(){return t.a.createElement("div",{className:"App"},t.a.createElement(I,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(t.a.createElement(i.a,{store:E},t.a.createElement(L,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[23,1,2]]]);
//# sourceMappingURL=main.728121a9.chunk.js.map